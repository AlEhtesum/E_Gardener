{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <title>Checkout</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
    }

    .hero {
        width: 100%;
        height: 20vh;
        background-color: #34495e;
        position: relative;
        padding: 0 5%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    nav {
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        padding: 20px 5%;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    nav .logo {
        max-width: 180px;
        width: 100%;
        height: auto;
    }

    nav ul li {
        list-style: none;
        display: inline-block;
        margin-left: 20px;
    }

    nav ul li a {
        text-decoration: none;
        font-size: 20px;
        color: #fff;
    }

    nav ul li a:hover {
        color: #027351;
    }

    body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
    }

    .container {
        width: 25%;
        margin: 0 auto;
        padding: 20px;
        background-color: #b4a2a2;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        margin-top: 50px;
        margin-bottom: 30px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        color: #333;
    }

    .cart-details {
        border-bottom: 1px solid #ccc;
        padding-bottom: 20px;
        margin-bottom: 20px;
    }

    .cart-details h2 {
        color: #333;
        font-size: 24px;
        margin-bottom: 10px;
    }

    #cart-summary {
        margin-bottom: 10px;
    }

    #cart-summary .item {
        border-bottom: 1px solid #ccc;
        padding: 10px 0;
        display: flex;
        justify-content: space-between;
    }

    #cart-summary .item div {
        flex: 1;
    }

    #total-price {
        font-weight: bold;
        font-size: 18px;
        color: #333;
    }

    .customer-info {
        margin-bottom: 20px;
    }

    .customer-info h2 {
        color: #333;
        font-size: 24px;
        margin-bottom: 10px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        color: #333;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"], /* Added input[type="tel"] for contact number */
    textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    button[type="submit"] {
        background-color: #4caf50;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }

    button[type="submit"]:hover {
        background-color: #394185;
    }
    .item {
            background-color: #85c4b9; /* Light grey background color */
            border: 1px solid #0c060e; /* Border to distinguish the card */
            padding: 10px; /* Padding inside the card */
            margin-bottom: 10px; /* Space between the cards */
            border-radius: 5px; /* Rounded corners */
        }
</style>

  </head>
<body>
    <div class="hero">{% include "navbar.html" %}</div>
    <div class="container">
        <h1>Order Now</h1>
        <div class="cart-details">
            <h2>Cart Summary</h2>
            <div id="cart-summary">
                <!-- Cart items will be dynamically inserted here -->
            </div>
            <div id="total-price">
                <!-- Total price will be displayed here -->
            </div>
        </div>

        <div class="checkout">
            <h2 style="margin-bottom: 20px;">Customer Information</h2>
            <form id="checkout-form" method="post" action="{% url 'checkout' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" required />
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required />
                </div>
                <div class="form-group">
                    <label for="contact">Contact Number</label>
                    <input type="tel" id="contact" name="contact" required />
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea id="address" name="address" required></textarea>
                </div>
                <div class="form-group">
                    <label for="payment">Select a Payment Method</label>
                    <select id="payment" name="payment" required style="margin-bottom: 10px;">
                        <!-- Add options for payment methods -->
                        <option value="">Select Payment Method</option>
                        <option value="card">Card</option>
                        <option value="bkash">Bkash</option>
                        <option value="bkash">Nagad</option>
                        <option value="cod">Cash On Delivery</option>
                    </select>
                </div>
                <button type="submit">Place Order</button>
            </form>
        </div>
    </div>
    <footer>
        <h4>&copy; 2024 EWU</h4>
    </footer>
    <script type="application/json" id="product-data">
        [
        {
        "id": 1,
        "name": "Jasmine Plant",
        "price": 50,
        "image": "{% static 'images/Jasmine1.jpg' %}"
        },
        {
        "id": 2,
        "name": "Mango Plant",
        "price": 200,
        "image": "{% static 'images/mango.jpg' %}"
        },
        {
        "id": 3,
        "name": "Watering Can",
        "price": 290,
        "image": "{% static 'images/wcan.jpg' %}"
        },
        {
        "id": 4,
        "name": "Plant Pot",
        "price": 200,
        "image": "{% static 'images/pot.jpg' %}"
        },
        {
        "id": 5,
        "name": "Tool set",
        "price": 1000,
        "image": "{% static 'images/toolset.jpg' %}"
        },
        {
        "id": 6,
        "name": "Hand Trowel",
        "price": 200,
        "image": "{% static 'images/trowel.jpg' %}"
        },
        {
        "id": 7,
        "name": "Plant Fertilizer",
        "price": 320,
        "image": "{% static 'images/fgr.jpeg' %}"
        },
        {
        "id": 8,
        "name": "Organic Fertilizer",
        "price": 180,
        "image": "{% static 'images/organic.webp' %}"
        }
        ]
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const productData = JSON.parse(
                document.getElementById("product-data").textContent
            );

            function renderCartSummary() {
                const cartSummary = document.getElementById("cart-summary");
                const totalPriceElement = document.getElementById("total-price");
                cartSummary.innerHTML = "";
                let totalPrice = 0;

                cart.forEach((item) => {
                    const product = productData.find(
                        (product) => product.id === item.id
                    );
                    const cartItem = document.createElement("div");
                    cartItem.classList.add("item");
                    cartItem.innerHTML = `
                        <div>${product.name}</div>
                        <div>Quantity: ${item.quantity}</div>
                        <div>Price: ${product.price.toFixed(2)}</div>
                    `;
                    cartSummary.appendChild(cartItem);
                    totalPrice += product.price * item.quantity;
                });

                totalPriceElement.textContent = `Total Price: ${totalPrice.toFixed(
                    2
                )}`;
            }

            renderCartSummary();

            document
                .getElementById("checkout-form")
                .addEventListener("submit", function (event) {
                    event.preventDefault();
                    localStorage.removeItem("cart");
                    alert("Thank you for your purchase!");
                    window.location.href = "/";
                });
        });
    </script>
</body>

</html>

